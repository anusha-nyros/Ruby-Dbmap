<%= render :partial => "search_form", locals: {q: @q} %>
<div id="search-result">
  <% if @fields.blank? %>
    <% if params[:q] %>
       <p class="well">No records found</p>
	    <% else %>
		    <p>Your search does not generate a result</p>
    <% end %>
  <% else %>
  <div style="float:right;margin-right:20px;"><% unless @fields.blank? %>[<%= @fields.count %>] Records Found<% end %></div>
<br/>
<table class="table table-striped" >
  <tr>
    <th><%= sort_link(@q,:database_name," Database Name") %></th>
    <th><%= sort_link(@q,:table_name," Table") %></th>
  <th><%= sort_link(@q, :field_name, "FieldName") %></th>

 <th><%= sort_link(@q, :field_type, "Type") %></th>
    <th><%= sort_link(@q, :field_size, "Size") %></th>
    <th><%= sort_link(@q, :environment, "Environment") %></th>
 <th><%= sort_link(@q, :description, "Description") %></th>

    <th></th>
    <th></th>
  </tr>
  <% @fields.each do |field| %>
  <tr>
    <td><%= field.database_name %></td>
    <td><%= field.table_name %></td>
    <td><%= field.field_name %></td>
    <td><%= field.field_type %></td>
   <td><%= field.field_size %></td>
    <td><%= field.environment %></td>
    
    <td><%= truncate(field.description,:length=>30) %></td>
    
  
    <td>
   <%= link_to 'Show', field, class: 'btn btn-mini' %>
   <%= link_to 'Edit', edit_field_path(field), class: 'btn btn-mini' %>
    </td>
    <td></td><td></td>
  </tr>
<% end %>
</table>

<% end %>
</div>
